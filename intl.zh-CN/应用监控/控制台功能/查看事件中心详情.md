---
keyword: [应用事件, K8s事件, 应用报警]
---

# 查看事件中心详情

事件中心是将某些云产品所生成的事件数据进行统一管理、存储、分析和展示的功能模块，目前接入了EDAS的变更事件、ARMS的报警事件、0-1事件（如死锁、OOM和应用启动等）、MSE的微服务管控事件和K8s集群事件。当您的应用使用了相关的产品，对应的事件会自动接入事件中心进行统一的分析展示，方便您查看与分析。

## 事件模型

事件中心的一个事件主要由`{source（事件来源），type（事件类型）, level（事件等级）, time（事件发生时间）, data（事件体）}`这样5个字段来定义，其中事件体data一般是一个JSON字符串。事件的搜索展示和订阅会涉及事件的这5个字段。

除此以外，一个事件还会关联一些额外的可选字段，目前主要包括PID、IP、ClusterId和PodName。

## 进入事件中心

1.  登录[ARMS控制台](https://arms-ap-southeast-1.console.aliyun.com/#/home)。

2.  在左侧导航栏选择**应用监控** \> **应用列表**，并在顶部菜单栏选择目标地域，然后单击目标应用名称。

3.  在左侧导航栏单击**事件中心**。


## 事件中心模块介绍

事件中心页面根据是否进入某个应用的界面分为非应用模式和应用模式， 前者会展示该当前账号下所有事件，后者仅展示用户下跟指定应用关连的事件。

事件中心主要包含典型事件和三个页签（分别是**普通视图**，**拓扑视图**和**订阅规则**）。

-   典型事件：展示系统预置的典型事件的数量。更多信息，请参见[典型事件](#section_1wn_yng_nw3)。
-   **普通视图**将与当前应用关联的所有事件进行简单的多维度分析与展示。更多信息，请参见[普通视图](#section_9xe_ve1_apw)。
-   **拓扑视图**将当前应用关联的事件和与当前应用的资源拓扑图进行结合展示。更多信息。请参见[拓扑视图](#section_or4_auc_c2u)。
-   **订阅规则**以列表形式展示了当前您创建的订阅规则。更多信息，请参见[订阅规则](#section_qg6_2r4_452)。

## 典型事件

典型事件：展示系统预置的典型事件类型在最近30分钟（可在右上角调整时间范围）内发生的次数。在事件下方单击**订阅**，可以编辑该事件的订阅规则。订阅规则的操作，请参见[订阅规则](#section_qg6_2r4_452)。

![事件中心](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/9716988061/p206200.png)

## 普通视图

**普通视图**可以按照您指定的检索条件进行搜索，搜索的结果会以四个视图进行展示，分别是：**最近两周事件热力图**、**不同来源事件占比**、**不同来源事件数量走势**和**事件详情**。

![普通视图](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/8738988061/p170186.png)

-   **最近两周事件热力图**展示近两周内满足过滤条件的事件发生次数按小时统计的热力分布。颜色越深，说明该小时内发生的事件数量越多。
-   **不同来源事件占比**展示不同来源事件的数量占比。
-   **不同来源事件数量走势**展示不同来源事件在选定时段内的走势。
-   **事件详情**展示当前所有事件的详情列表。

**普通视图**查看说明：

-   单击**最近两周事件热力图**中的热力方块，可查看该小时内的事件详情。
-   单击**不同来源事件数量走势**中的立柱，可在事件详情区域查看对应时段内的所有事件列表。
-   单击事件详情右侧的**查看**，可以查看事件的具体内容。
-   单击事件详情右侧的**订阅**，可以订阅指定事件。更多信息，请参见[订阅规则](#section_qg6_2r4_452)。

## 拓扑视图

拓扑视图首先会绘制出该应用的资源拓扑，包含该应用使用的ECS，该应用部署的实例Pod，该应用使用的所有RDS和Redis等中间件资源，以及该应用挂载的SLB和NAT等。之后会将获取到的关联事件、操作审计、云监控事件关联到对应的拓扑节点上，单击相应节点，会在左上角的**事件详情**区域展示与该节点关联的事件：

-   **应用侧相关事件**：即事件中心的事件。
-   **云资源侧相关事件**：即云监控的相关事件。
-   **相关操作审计**：即来自于操作审计的审计记录。

该视图可以帮助您在应用出现故障时，快速排查关联的资源各自发生了什么问题。例如在大型企业中，由于某个员工的误操作，重启了生产环境的RDS，导致线上业务故障，利用该视图，可以快速的发现应用访问的RDS出现了重启操作。

![拓扑视图](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/2915690061/p170187.png)

## 订阅规则

订阅规则页签展示您当前所有的订阅规则，您可以在该页面启用、禁用或者修改规则。

**说明：** 您只能修改您自己在控制台创建的规则，无法修改系统内部自动创建的规则。

订阅规则是一条表示您订阅满足指定条件的事件，并将该事件发送到指定Webhook的规则。创建订阅规则有两种方式：

-   方式一：在订阅规则页签右上角单击**新建订阅规则**。
-   方式二：在**普通视图**页签的事件列表区域单击事件的**订阅**。



1.  单击**订阅规则**页签，在页面右上角单击**新建订阅规则**。

2.  在**新建订阅规则**面板的**填写基本信息**页面输入**规则名称**和**规则描述**，然后单击**下一步**。

3.  在**选择事件模式**页面设置事件规则参数，然后单击**下一步**。

    |参数|描述|
    |--|--|
    |**事件来源**|在下拉列表中选择事件来源。|
    |**事件类型**|在下拉列表中选择事件类型。|
    |**事件等级**|在下拉列表中选择事件等级。|
    |**事件关键字**|在文本框中输入事件关键字。|
    |**显示高级过滤选项**|默认关闭，开启后可设置**集群ID**、**接口/服务名**、**主机IP**和**POD名**的过滤选项。|
    |**自定义过滤条件**|自定义过滤条件一般用来指定事件体JSON的某个字段需要满足的条件，根节点是data，以`.`的形式下钻事件体JSON的某个字段。请输入自定义的过滤条件，最多可以设置6条过滤条件。|
    |**选择有效字段**|以`%data.x.y;`的形式选择有效字段，选择完成后，请给选择的字段输入一个别名，该别名可用于在填写Webhook信息的Post请求体中以占位符的形式出现。最多可以设置6条有效字段。|
    |**消息通知模板**|消息通知模板会作为当指定消息发生时通知给您的内容（如果通知对象为钉钉机器人Webhook，请注意在消息模板中包含创建钉钉机器人Webhook时的关键字）。 |

4.  在**选择联系人**页面选择联系人，然后单击**提交**。

    如果**选择联系人**的列表中没有联系人信息，在右侧单击**新建联系人**，创建联系人后再在列表中选择。


1.  在**普通视图**页签的**事件详情**区域，单击事件详情右侧的**订阅**。

    以该种方式创建的订阅规则，会根据您选择的事件来自动选择事件来源、事件类型和事件等级三个过滤条件。

2.  单击事件JSON文件中某个字段Value的形式来选择自定义过滤条件和有效字段。每次单击会自动生成一个过滤条件和选择字段，同时您还可以手动修改或者删除字段来调整规则，完成事件模式设置后单击**下一步**。

3.  在**选择联系人**页面选择联系人，然后单击**提交**。

    如果**选择联系人**的列表中没有联系人信息，在右侧单击**新建联系人**，创建联系人后再在列表中选择。


