# 主动剖析

ARMS应用监控的主动剖析功能可以根据您的实际需求，手动触发线程剖析监听任务。

[接入应用监控](/cn.zh-CN/应用监控/接入应用监控/应用监控接入概述.md)

**说明：** 该功能需要升级探针版本至2.7.1.1及以上，如何升级探针，请参见[升级探针](/cn.zh-CN/应用监控/升级探针.md)。

## 新增主动剖析任务

1.  登录[ARMS控制台](https://arms.console.aliyun.com/#/home)。

2.  在左侧导航栏，选择**应用监控** \> **应用列表**。

3.  在顶部菜单栏，选择地域。

4.  在**应用列表**页面，单击应用名称。

5.  在**左侧导航栏**，单击**主动剖析**。

6.  在新增任务区域设置所有参数，然后单击**完成**。

    ![主动剖析-新增任务](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/3144224161/p242798.png)

    |参数|描述|
    |--|--|
    |接口名称|接口名称。|
    |监控持续时间|一次监控任务有效的生命周期。选项：    -   5min
    -   10min
    -   15min |
    |剖析开始阈值（ms）|超过剖析阈值的慢调用才会被监听。例如：一个持续时间为1.4s的请求，如果剖析开始阈值设置为100ms，那么只有100ms~1400ms的时间段会被监听。取值范围：50ms~30000ms。|
    |线程剖析频率（ms）|线程剖析过程中，接口快照的打印频率。取值越小，精度越高，相应的性能开销越大，建议频率设置为100ms。取值范围：5ms~1000ms。|
    |最大采样数|最多监听的慢调用数量。取值范围：1~100。|


## 查看线程剖析信息

1.  登录[ARMS控制台](https://arms.console.aliyun.com/#/home)。

2.  在左侧导航栏，选择**应用监控** \> **应用列表**。

3.  在顶部菜单栏，选择地域。

4.  在**应用列表**页面，单击应用名称。

5.  在**左侧导航栏**，单击**主动剖析**。

6.  在新增任务区域单击**查看历史任务**。

7.  在页面右上角选择需要查看的时间段，并在在任务列表区域单击需要查看的主动剖析任务。

    在任务列表区域显示所选时间段内所有的主动剖析任务。

    ![主动剖析-历史任务](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/3144224161/p243147.png)

    在右侧线程剖析信息区域显示当前选中接口的剖析信息，包括：TraceID、产生日志时间、接口名称、响应码、IP和耗时。

    -   单击TraceID，可以查看调用链路详情。更多信息，请参见[调用链路查询](/cn.zh-CN/应用监控/控制台功能/调用链路查询.md)
    -   单击**详情**列的**线程剖析**，查看目标链路的线程剖析详情。

        ![线程剖析](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/3144224161/p243145.png)


## 查看线程剖析任务详情

1.  登录[ARMS控制台](https://arms.console.aliyun.com/#/home)。

2.  在左侧导航栏，选择**应用监控** \> **应用列表**。

3.  在顶部菜单栏，选择地域。

4.  在**应用列表**页面，单击应用名称。

5.  在**左侧导航栏**，单击**主动剖析**。

6.  在新增任务区域单击**查看历史任务**。

7.  单击任务列表区域目标剖析任务右下角的**详情**。

    在日志页签可以查看该任务的详细信息。

    ![主动剖析-任务详情](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/5805334161/p243943.png)

8.  单击**日志**页签。

    在日志页签可以查看该任务的日志信息。

    ![主动剖析-日志](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/5805334161/p243944.png)


**相关文档**  


[使用线程剖析诊断代码层面的问题](/cn.zh-CN/应用监控/使用教程/使用线程剖析诊断代码层面的问题.md)

