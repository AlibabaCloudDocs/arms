# 调用链路查询

在调用链路查询页面，您可以通过TraceId精确查询调用链路详细情况，或结合多种条件筛选查询调用链路。也可以对多条调用链进行聚合分析。

## 查询调用链路

1.  登录[ARMS控制台](https://arms.console.aliyun.com/#/home)。
2.  在左侧导航栏选择**应用监控** \> **调用链路查询**，并在顶部菜单栏选择目标地域。
3.  在调用链路查询页面选择**参数类型**，在**参数值**中填入自定义标签，单击**添加到查询条件**。

    可以使用TraceId参数进行精确查询。

    |参数类型|描述|
    |----|--|
    |TraceId|输入TraceId。|
    |接口名称|应用调用的接口名称，不支持模糊搜索。|
    |客户端应用名|客户端的应用名称。|
    |服务端应用名|服务端的应用名称。|
    |耗时大于|调用的耗时大于指定毫秒数。|
    |调用类型|选择调用类型。|
    |是否异常调用|所有包含异常调用的链路。|
    |仅含线程剖析快照|所有包含线程剖析快照的链路。|
    |客户端IP|调用发起应用IP。|
    |服务端IP|请求被调用的应用IP。|
    |业务主键|搜索业务事件所使用的字段。|
    |响应码|输入响应码。|

4.  单击需要查看的TraceID名称，进入调用链路页面。

    ![调用链路](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/6352636061/p43192.png)

    调用链路页面字段说明如下：

    -   应用名称：所属应用名称。
    -   日志产生时间：日志产生的时间。
    -   状态： 红色表示该服务调用的本地调用链路中存在异常，绿色表示正常。
    -   IP地址：该应用的IP地址。
    -   调用类型：该次调用的调用类型，与即席查询的调用类型选项对应。
    -   服务名称：该次调用的服务接口名称。
    -   时间轴：各服务间调用链路的耗时，以及相对于整条调用链路的耗时分布。

## 分析调用链路

在调用链路查询页面选中所有需要分析的调用链路，单击**分析选中调用链路**。

在调用链分析面板可以查看所有选中调用链路的Span名称、应用名、调用类型、请求数/请求比例、异常数/异常比例、平均自身耗时和平均耗时。

![调用链聚合分析](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/2286607061/p187132.png)

-   将鼠标放在Span名称上，可以查看包含该Span的TraceID。
-   单击应用名可以进入该应用的应用总览页面。
-   单击目标Span**操作**列的**统计分析**，可以查看该Span的详细信息，包括各接口的调用类型占比、消耗总时间、接口名称、请求次数、样本推荐和所有调用方法的名称、类型、调用次数、执行时间和时间百分比。

    ![Span的详细信息](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/5718996061/p187916.png)


## 相关操作

在调用链路页面，单击**指标监控**列的折线图，可以查看不同时间段的请求数、响应时间和错误数。

在调用链路页面，单击**方法栈**列的![放大镜](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/6352636061/p185206.png)图标，进入方法栈对话框。

![方法栈](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/6352636061/p42284.png)

方法栈对话框字段说明如下：

-   调用方法：本地方法栈调用方法，展开后显示的是该方法的下一层调用。
-   行号：本地方法的代码所在行数。
-   扩展信息：
    -   参数：调用的输入参数等
    -   SQL：数据库调用的SQL语句等
    -   异常：抛错的信息等
-   时间轴：本地调用链路每次方法调用的时间分布。

