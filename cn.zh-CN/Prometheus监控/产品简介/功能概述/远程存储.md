# 远程存储

阿里云Prometheus的RemoteWrite功能支持作为远程数据库存储Prometheus监控数据。本文将介绍如何使用阿里云Prometheus的RemoteWrite对接开源Prometheus，构建监控数据的高效存储方案。

## 步骤一：创建RemoteWrite并获取读写URL

1.  登录[ARMS控制台](https://arms.console.aliyun.com/#/home)。

2.  在左侧导航栏单击**Prometheus监控**。

3.  在页面左上角选择目标地域，在Prometheus监控页面单击**接入Prometheus监控**。

4.  在接入Prometheus监控页面单击**Remote Write Prometheus**。

5.  在第1步向导页输入**RemoteWrite 名字**，然后单击**下一步**。

6.  在步骤2向导页复制并保存生成的Prometheus Remote Write Url，然后单击**下一步**。

7.  在步骤3向导页复制并保存生成的Prometheus Remote Read Url，然后关闭该向导页。


## 步骤二：配置Prometheus

1.  安装Prometheus，安装方法可以参考[官方文档](https://prometheus.io/download/)。

2.  打开Prometheus.yaml配置文件，并在文件末尾增加以下内容，将`remote_write`和`remote_read`链接替换为[步骤一：创建RemoteWrite并获取读写URL](#section_fnr_zrt_2dg)中获取的URL，然后保存文件。

    ```
    global:
      scrape_interval:     15s
      evaluation_interval: 15s
    scrape_configs:
      - job_name: 'prometheus'
        static_configs:
        - targets: ['localhost:9090']
    remote_write:
      - url: "http://${regionId}-intranet.arms.aliyuncs.com/prometheus/${password}/${userId}/${promCluster}/${regionId}/api/v3/write"
        basic_auth:   
          //username和password需要遵循AK/SK的限制，且AK/SK需要能够调用[GetPrometheusApiToken](/cn.zh-CN/API参考/Prometheus监控/GetPrometheusApiToken.md)。
          username: access-key-id
          password: access-key-secret
    remote_read:
      - url: "http://${regionId}-intranet.arms.aliyuncs.com/prometheus/${password}/${userId}/${promCluster}/${regionId}/api/v3/read"
        read_recent: true
    ```


