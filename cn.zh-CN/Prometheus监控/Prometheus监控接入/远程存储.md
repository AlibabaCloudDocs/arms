# 远程存储

Prometheus监控支持作为远程数据库存储开源Prometheus监控数据。本文介绍如何使用Remote Write功能将开源Prometheus接入Prometheus监控，从而构建监控数据的高效存储方案。

已开通ARMS。具体操作，请参见[开通和升级ARMS](/cn.zh-CN/快速入门/开通和升级ARMS.md)。

## 步骤一：创建Remote Write并获取读写URL

1.  登录[ARMS控制台](https://arms.console.aliyun.com/#/home)。

2.  在左侧导航栏单击**Prometheus监控**。

3.  在Prometheus监控页面的顶部菜单栏，选择地域，然后单击**接入Prometheus监控**。

4.  在接入Prometheus监控页面单击**Remote Write Prometheus**。

5.  在配置向导对话框，完成以下操作：

    1.  在第2步页签下，输入实例名称，然后单击**下一步**。

    2.  在第2步页签下，复制并保存**Remote Write地址**和**Remote Read地址**。


## 步骤二：配置Prometheus

1.  安装Prometheus，安装方法可以参考[官方文档](https://prometheus.io/download/)。

2.  打开Prometheus.yaml配置文件，并在文件末尾增加以下内容，将`remote_write`和`remote_read`链接替换为[步骤一：创建Remote Write并获取读写URL](#section_fnr_zrt_2dg)中获取的URL，然后保存文件。

    ```
    global:
      scrape_interval:     15s
      evaluation_interval: 15s
    scrape_configs:
      - job_name: 'prometheus'
        static_configs:
        - targets: ['localhost:9090']
    remote_write:
      - url: "http://${regionId}-intranet.arms.aliyuncs.com/prometheus/${password}/${userId}/${promCluster}/${regionId}/api/v3/write"
        basic_auth:   
          //username和password需要遵循AK/SK的限制，且AK/SK需要能够调用[GetPrometheusApiToken](/cn.zh-CN/API参考/Prometheus监控/GetPrometheusApiToken.md)。
          username: access-key-id
          password: access-key-secret
    remote_read:
      - url: "http://${regionId}-intranet.arms.aliyuncs.com/prometheus/${password}/${userId}/${promCluster}/${regionId}/api/v3/read"
        read_recent: true
    ```


