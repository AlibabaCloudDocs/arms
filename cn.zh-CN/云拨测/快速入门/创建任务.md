# 创建任务

云拨测提供浏览任务拨测、网络任务拨测等功能。如果您想要使用云拨测开始拨测您的应用，那么需要先创建云拨测任务。

云拨测可以利用分布全球的监测网络，对目标Web应用（如网站、服务器等）进行浏览或网络拨测。

## 操作步骤

1.  登录[ARMS控制台](https://arms.console.aliyun.com/#/home)。

2.  在左侧导航栏中单击**云拨测**，在定时拨测页面右上角单击**创建定时任务**。

3.  在基本信息配置向导页面设置任务名称、任务地址和任务类型，然后单击**下一步**。

    -   浏览任务拨测选择任务类型为浏览-IE全元素或浏览-Chrome全元素（HTTP1.1/2.0）。
    -   网络任务拨测选择任务类型为网络。
4.  在监测点配置向导页面添加监测点，然后单击**下一步**。

    设置**添加方式**为推荐监测点组或自定义，选中左侧区域框的监测点，单击![right_arrow](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/9028155061/p179404.png)添加至右侧已添加的监测点区域框中。目前每个任务支持最多添加50个监测点，如果添加超过50个，则仅前50个监测点有效。

5.  在监测参数配置向导页面配置监测参数，然后单击**下一步**。

    可根据实际拨测需求进行配置，浏览任务和网络任务的参数设置不同。

    |参数名称|参数说明|
    |----|----|
    |IP类型|选择IP类型，选项如下：    -   自动
    -   IPv4
    -   IPv6 |
    |监测关联项|选择监测关联项，选项如下：    -   禁用缓存：在加载页面时是否可以加载已缓存资源。
    -   返回元素：是否返回页面的元素。
    -   重定向：当出现重定向后，是否要继续浏览。
    -   禁用压缩：通过Accept-Encoding字段判断是否接受压缩文件。
    -   自动滚屏：是否支持自动滚动屏幕，加载页面。
    -   忽略证书错误：是否忽略在SSL握手中证书校验过程中的证书错误而继续浏览。
    -   过滤非有效IP：是否过滤非有效的IP，非有效的IP为：127.0.0.1。 |
    |quic版本|选择QUIC版本。|
    |quic请求元素域名|输入QUIC请求元素域名。|
    |高级设置|
    |返回请求头|选择返回请求头类型，选项如下：    -   返回基础文档：返回基础文档，即页面HTML的请求头。
    -   返回所有元素：返回页面所有元素资源。
    -   不返回 |
    |返回响应头|选择返回响应头类型，选项如下：    -   返回基础文档：返回基础文档，即页面HTML的响应头。
    -   返回所有元素：返回页面所有元素资源。
    -   不返回 |
    |环境标识|选择环境标识，选项如下：当监测点不满足任务设置的Framework版本时，将会报错。

    -   Framework 2.0
    -   Framework 3.0
    -   Framework 3.5
    -   Framework 4.0
    -   Framework 4.5 |
    |自定义Host|选择自定义Host模式，选项如下：    -   轮循
    -   随机
自定义Host格式：可以写多个IP，每个IP用英文逗号（,）分隔，如：ipv4:192.168.2.1,192.168.2.5:img.a.com\|192.168.2.1\[8080\]:img.a.com。

**说明：** 当遇到冒号（:）后的URL会自动按照冒号（:）前的任一URL进行解析。 |
    |自定义Header|添加或者修改请求头中的某些字段值，选项如下：    -   修改第一包：只修改本次浏览中第一次发送请求的请求数据包的Header。
    -   修改全部包：修改全部数据包的Header。
    -   关：不修改数据包的Header。
自定义Host格式：可以写多个字段，多个字段以竖线（\|）隔开。如：Host:www.example.com\|Referer:www.example.com。|
    |元素黑名单|在页面加载过程中如果出现元素黑名单中配置的元素，不会请求加载该元素 。|
    |元素白名单|元素白名单的元素应该包含在元素黑名单的设置范围内，在加载过程中出现元素白名单中的元素会正常加载。|
    |进程标识|执行任务主机上的任务管理器是否包含所设置的进程名称，如果不包含，将会报错。|
    |首屏标识|选中该功能后，当页面加载到所设置的URL，则会认为首屏加载完成。|
    |验证字符串黑名单|客户端返回的源码中如果包含任一所设置的字符串则报错，多个字符串以竖线（\|）隔开。|
    |验证字符串白名单|客户端返回的源码中只要没有包含任一所设置的字符串则报错，多个字符串以竖线（\|）隔开。|
    |监测超时|默认时间为40秒。在Onload事件后，程序定时周期性的查询浏览器的工作状态，如果为忙，则继续等待，n个周期后，浏览器状态若一直为忙直到设置的时间，则停止任务，回收数据；如果为空闲，则认为浏览完成。|
    |等待完成|默认时间为3.8秒，以等待完成用时为周期来查询浏览器的工作状态。|
    |起始执行时间|从输入的时间开始进行监测，对低频任务有效，起始执行时间不能大于任务频率。|
    |均匀分配监测样本|偏移量=周期分钟数/城市运营商个数，每个城市运营商的最早下发时间为周期起始执行时间加偏移量。|

    |参数名称|参数项|参数说明|
    |----|---|----|
    |IP类型|无|选择IP类型，选项如下：    -   自动
    -   IPv4
    -   IPv6 |
    |过滤非有效IP|无|是否过滤非有效的IP，非有效的IP为：127.0.0.1。|
    |DNS监测|监测超时|默认为5秒，超过设置时间则认为超时。|
    |查询方式|选择查询方式，选项如下：    -   递归：常规DNS查询。
    -   迭代：查询权威DNS服务器配置的记录。 |
    |指定NS服务器|可以指定某一DNS服务器。|
    |支持dig|是否以dig数据格式展示数据内容。|
    |DNS服务器类型|选择DNS服务器类型，选项如下：    -   自动
    -   IPv4
    -   IPv6 |
    |Tracert监测|监测超时|默认为60秒，超过设置时间则认为目标不可达，任务结束。|
    |最大跃点数|默认为20个，路由追踪可经过的跃点的最大值，超过设置个数则认为目标不可达。|
    |Ping监测|协议类型|选择协议类型，选项如下：    -   ICMP
    -   TCP |
    |监测超时|默认为20秒，超过设置时间则认为Ping不通。|
    |执行间隔|在上一个数据包收到Ping回显数据后，经过该设置时间进行下一包Ping。|
    |切分Package|当Ping数据包时选择是否要将数据包切分，可以自定义数据包的数量和大小。|
    |Package数量|设置Package数量，默认为4个。|
    |Package大小|设置Package大小。|
    |起始执行时间|无|从输入的时间开始进行监测，对低频任务有效，起始执行时间不能大于任务频率。|
    |起始执行时间|无|偏移量=周期分钟数/城市运营商个数，每个城市运营商的最早下发时间为周期起始执行时间加偏移量。|

6.  在监测周期配置向导页面设置拨测周期和拨测频率，然后单击**下一步**。

7.  在预览&发布配置向导页面确认设置的参数，然后单击**完成**。

    发布完成后将会跳转至任务列表页面。


## 相关操作

在定时拨测页面显示了任务名称、拨测类型、URL、监测点数、创建时间、可用性和任务状态。

-   单击目标任务的名称或右侧的**详情**，可跳转至该任务的任务概览页面。
-   单击目标任务右侧的**编辑**，可修改该任务。
-   单击目标任务右侧的**启用**，可启用该任务。
-   单击目标任务右侧的**禁用**，可禁用该任务。
-   单击目标任务右侧的**删除**，可删除该任务。

