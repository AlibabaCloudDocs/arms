# 添加模式检测配置

本文介绍了如何添加模式检测配置。该配置是模式检测模块主动发现日志中的异常和对比不同时间段日志的前提条件。

## 前提条件

[创建自定义监控任务](/cn.zh-CN/快速入门/创建自定义监控任务.md)

## 背景信息

关于模式检测模块的详细信息，请参见[模式检测](/cn.zh-CN/自定义监控/使用教程/模式检测.md)。

## 操作步骤

1.  登录[ARMS控制台](https://arms.console.aliyun.com/#/home)。
2.  在左侧导航栏中选择**自定义监控** \> **监控任务管理**。
3.  在实例列表页面上找到目标监控任务，单击**操作**列的**编辑**，并进入数据集与报警配置页签。

    **说明：** 如果单击**编辑**之前，自定义监控任务正在运行，则会直接进入数据集与报警配置页签。如果自定义监控任务不在运行，则需要通过单击**下一步**导航至数据集与报警配置页签。

4.  在**模式检测**区域单击**添加匹配规则**。

    ![Pattern detection](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/3584615061/p43769.png)

5.  在添加匹配规则对话框中输入规则名称，选择时间字段（日志中的业务时间或系统时间），并单击**保存**。

    ![Add matching rules](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/3584615061/p43770.png)

    **说明：** 在**选择时间字段**下拉框中，如果未切分日志，可选择系统时间`_sysTime`（默认选项）。如果已切分日志，可以选择日志中的业务时间。

6.  单击数据集与报警配置页签上方的**返回监控任务管理**。
7.  如果自定义监控任务正在运行，则单击操作列的**停止**，间隔15s后再单击**启动**。
8.  在**启动监控任务**对话框中，选择**从头开始消费**或**从最新位置消费**，并单击**确定**。

    监控任务启动成功，设置的模式检测配置生效。


## 更多操作

在自定义监控任务实例列表页面启动该任务后，即可前往**模式检测**页面查看日志异常情况或不同时间段的日志对比。

**说明：** 启动自定义监控任务后，大约3分钟后可看到模式检测结果。

**相关文档**  


[创建全息排查事件集](/cn.zh-CN/自定义监控/创建监控任务/创建全息排查事件集.md)

[模式检测](/cn.zh-CN/自定义监控/使用教程/模式检测.md)

